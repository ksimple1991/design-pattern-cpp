# State（状态模式）
## 定义
> Allow an object to alter its behavior when its internal state changes. The Object will appear to change its class.

当一个对象内在状态改变时允许其改变行为，这个对象看起来像改变了其类。

## 应用
---
### 优点
- 结构清晰
- 遵循设计原则。很好的体现了开闭原则和单一职责原则
- 封装性非常好

### 缺点
- 存在类膨胀。有很多个状态时，子类会太多，不好管理

### 使用场景
- 行为随状态改变而改变的场景。比如权限设计，人员的状态不同即使执行相同的行为结果也会不同

- 条件、分支判断语句的替代者。

### 注意事项
- 实际软件开发中，状态模式并不是很常用，在合适的场景中它可以发挥很大的作用。可以逻辑分支法和查表法代替。

### 最佳实践
电商下单、外卖下单这种类型的状态机，它们的状态并不多，状态转移也比较简单，但事件执行的动作包含的业务逻辑可能会比较复杂。

## 扩展
状态模式是状态机的一种实现方式。状态机又叫有限状态机，它由三个部分组成：状态、事件、动作。其中，事件也称为转移条件。事件触发状态的转移以及动作的执行。不过动作不是必须的，也可能只转移状态，不执行动作。

针对状态机，一般有三种实现方式：
- 分支逻辑。利用if-else或者switch-case分支逻辑，参照状态转移图，将每一种状态转移原模原样地直译成代码。适用于简单的状态机，这种方式最简单、最直接；

- 查表法。对于状态很多、状态转移比较复杂的状态机来说，查表法比较合适。通过二位数组来表示状态转移图，能极大的提高代码的可读性和可维护性；

- 状态模式。对于状态并不多、状态转移也比较简单，但事件触发执行动作包含的业务逻辑可能比较复杂的状态机来说，这种实现方式是首选。

